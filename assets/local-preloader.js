"use strict";(self.webpackChunkmifan_themes=self.webpackChunkmifan_themes||[]).push([[945],{453:function(){const e=()=>{if("loading"===document.readyState)return void document.addEventListener("DOMContentLoaded",e);const t=document.querySelector("#local-preloader");if(!t)return void console.warn("Preloader element #local-preloader not found");const o=document.querySelectorAll('img, video, audio, iframe, object, embed, script, link[rel="stylesheet"]'),r=Array.from(o).filter((e=>"SCRIPT"===e.tagName||("LINK"===e.tagName&&"stylesheet"===e.rel?!e.sheet:"IMG"===e.tagName?e.src&&!e.src.startsWith("data:")&&!e.complete:"IFRAME"!==e.tagName||e.src&&!e.src.startsWith("about:")&&!e.src.startsWith("data:")))),a=r.length;let l=0,s=new Set,d=!1;console.log(`Preloader: Found ${a} assets to monitor (filtered from ${o.length} total)`);const n=document.querySelectorAll("script");if(console.log("=== SCRIPT TAGS DETAILED ANALYSIS ==="),n.forEach(((e,t)=>{console.log(`Script ${t+1}:`,{tagName:e.tagName,src:e.src,srcValue:e.getAttribute("src"),type:e.type,readyState:e.readyState,readyStateType:typeof e.readyState,complete:e.complete,completeType:typeof e.complete,hasSrc:!!e.src,isInline:!e.src,innerHTML:e.innerHTML?e.innerHTML.substring(0,50)+"...":"empty"})})),console.log("=== END SCRIPT ANALYSIS ==="),0===a)return t.classList.add("local-preload--loaded"),void console.log("Preloader: No assets found, marking as loaded");r.forEach(((e,t)=>{s.add(t)}));const c=(e="normal")=>{d||(d=!0,t.classList.add("local-preload--loaded"),console.log(`Preloader: Completed (${e})`))},i=(e,t,o="loaded")=>{if(s.has(e)){s.delete(e),l++;const n=r[e];console.log(`Preloader: ${t} ${e+1}/${a} ${o} (${l}/${a})`),"failed"===o&&console.warn(`Preloader: Asset failed - ${n.src||n.href||"inline script"}`),l===a&&!d&&c("all assets loaded")}};r.forEach(((e,t)=>{"SCRIPT"===e.tagName?(console.log(`=== PROCESSING SCRIPT ${t+1} ===`),console.log("Script details:",{src:e.src,srcAttribute:e.getAttribute("src"),type:e.type,readyState:e.readyState,readyStateType:typeof e.readyState,complete:e.complete,completeType:typeof e.complete,isInline:!e.src,tagName:e.tagName}),(e=>{if(!e.src)return!0;try{const t=e.readyState,o=e.complete;return console.log(`Checking script: ${e.src}`,{readyState:t,readyStateType:typeof t,complete:o,completeType:typeof o}),"complete"===t||"loaded"===t}catch(e){return console.warn(`Error checking script properties: ${e.message}`),!1}})(e)?i(t,"Script","already loaded"):e.src?(console.log(`Preloader: Waiting for script to load: ${e.src}`),e.addEventListener("load",(()=>{console.log(`Preloader: Script loaded successfully: ${e.src}`),i(t,"Script")})),e.addEventListener("error",(()=>{console.warn(`Preloader: Script failed to load: ${e.src}`),i(t,"Script","failed")}))):(console.log("Preloader: Inline script detected, marking as loaded"),i(t,"Inline Script","loaded")),console.log(`=== END SCRIPT ${t+1} ===`)):"LINK"===e.tagName&&"stylesheet"===e.rel?e.sheet?i(t,"Stylesheet","already loaded"):(e.addEventListener("load",(()=>i(t,"Stylesheet"))),e.addEventListener("error",(()=>i(t,"Stylesheet","failed")))):e.complete||"complete"===e.readyState||"loaded"===e.readyState?i(t,"Media asset","already loaded"):(e.addEventListener("load",(()=>i(t,"Media asset"))),e.addEventListener("error",(()=>i(t,"Media asset","failed"))))})),setTimeout((()=>{d||(console.warn("Preloader: Timeout reached, forcing completion"),s.size>0&&console.warn(`Preloader: ${s.size} assets still pending:`,Array.from(s).map((e=>{const t=r[e];return{index:e,tagName:t.tagName,src:t.src||t.href||"inline script",type:t.type||"unknown"}}))),c("timeout"))}),5e3),window.addEventListener("load",(()=>{setTimeout((()=>{d||(console.warn("Preloader: Window load completed, forcing remaining assets"),c("window load"))}),500)})),setTimeout((()=>{d||(console.warn("Preloader: Final safety timeout, forcing completion"),c("final safety timeout"))}),1e4)};e()}},function(e){var t;t=453,e(e.s=t)}]);