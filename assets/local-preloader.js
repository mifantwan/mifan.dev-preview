"use strict";(self.webpackChunkmifan_themes=self.webpackChunkmifan_themes||[]).push([[945],{453:function(){window.scriptLoader=new class{constructor(){this.loadedScripts=new Set,this.loadingScripts=new Map,this.callbacks=new Map}loadScript(e,t={}){const{defer:a=!0,async:r=!1,priority:d="normal",dependencies:o=[],onLoad:s=null,onError:l=null}=t;if(this.loadedScripts.has(e))return s&&s(),Promise.resolve();if(this.loadingScripts.has(e))return this.loadingScripts.get(e);const i=o.map((e=>this.loadScript(e))),n=Promise.all(i).then((()=>new Promise(((t,o)=>{const i=document.createElement("script");i.src=e,i.defer=a,i.async=r,"high"===d&&i.setAttribute("data-priority","high"),i.onload=()=>{this.loadedScripts.add(e),this.loadingScripts.delete(e),s&&s(),t()},i.onerror=t=>{this.loadingScripts.delete(e),l&&l(t),o(t)},"high"===d?document.head.insertBefore(i,document.head.firstChild):document.head.appendChild(i)}))));return this.loadingScripts.set(e,n),n}loadScripts(e){return Promise.all(e.map((e=>"string"==typeof e?this.loadScript(e):this.loadScript(e.src,e))))}isLoaded(e){return this.loadedScripts.has(e)}};const e=()=>{if("loading"===document.readyState)return void document.addEventListener("DOMContentLoaded",e);const t=document.querySelector("#local-preloader");if(!t){const e=document.createElement("div");e.id="local-preloader",e.style.display="none",document.body.appendChild(e),t=e}const a=document.querySelectorAll('\n        img, video, audio, iframe, object, embed, \n        script, link[rel="stylesheet"], link[rel="preload"], link[rel="prefetch"],\n        link[rel="font"], link[rel="icon"], link[rel="apple-touch-icon"],\n        source, track, picture, svg, canvas\n    '),r=(document.currentScript||(()=>{const e=document.querySelectorAll("script");for(let t of e)if(t.src&&t.src.includes("preloader"))return t})(),(()=>{const e=[];return Array.from(document.styleSheets).forEach(((t,a)=>{try{Array.from(t.cssRules||t.rules||[]).forEach((t=>{if(t.style){const a=t.style.backgroundImage;if(a&&"none"!==a){const r=a.match(/url\(['"]?([^'"]+)['"]?\)/g);r&&r.forEach((a=>{const r=a.replace(/url\(['"]?([^'"]+)['"]?\)/,"$1");r.startsWith("data:")||r.startsWith("#")||e.push({type:"CSS Background Image",url:r,rule:t.selectorText||"unknown"})}))}const r=t.style.content;if(r&&"none"!==r){const a=r.match(/url\(['"]?([^'"]+)['"]?\)/g);a&&a.forEach((a=>{const r=a.replace(/url\(['"]?([^'"]+)['"]?\)/,"$1");r.startsWith("data:")||r.startsWith("#")||e.push({type:"CSS Content Image",url:r,rule:t.selectorText||"unknown"})}))}}if(t.type===CSSRule.FONT_FACE_RULE){const a=t.style.fontFamily,r=t.style.src;if(a&&r){const t=r.match(/url\(['"]?([^'"]+)['"]?\)/g);t&&t.forEach((t=>{const r=t.replace(/url\(['"]?([^'"]+)['"]?\)/,"$1");r.startsWith("data:")||r.startsWith("#")||e.push({type:"CSS Font",url:r,rule:`@font-face { font-family: ${a} }`})}))}}}))}catch(e){}})),e})().map((e=>{if("CSS Font"===e.type){const t=document.createElement("link");return t.rel="font",t.href=e.url,t.setAttribute("data-css-asset","true"),t.setAttribute("data-css-type",e.type),t.setAttribute("data-css-rule",e.rule),document.head.appendChild(t),t}{const t=document.createElement("img");return t.src=e.url,t.style.display="none",t.setAttribute("data-css-asset","true"),t.setAttribute("data-css-type",e.type),t.setAttribute("data-css-rule",e.rule),document.body.appendChild(t),t}}))),d=[...Array.from(a),...r].filter((e=>!(e=>{const t=e.src||e.href||"";return t.includes("preloader")||t.includes("local-preloader")})(e)&&("SCRIPT"===e.tagName||("LINK"===e.tagName?"stylesheet"===e.rel?!e.sheet:["preload","prefetch","font","icon","apple-touch-icon"].includes(e.rel):"IMG"===e.tagName?e.src&&!e.src.startsWith("data:")&&!e.complete:"IFRAME"===e.tagName?e.src&&!e.src.startsWith("about:")&&!e.src.startsWith("data:"):"VIDEO"===e.tagName||"AUDIO"===e.tagName||("SOURCE"===e.tagName||"TRACK"===e.tagName?e.src&&!e.src.startsWith("data:"):("PICTURE"===e.tagName||"SVG"===e.tagName||e.tagName,!0)))))),o=d.length;let s=0,l=new Set,i=!1,n=!1;Array.from(a).filter((e=>"SCRIPT"===e.tagName));if(window.localPreloaderDebug){document.querySelectorAll("script").forEach(((e,t)=>{}))}if(0===o)return void t.classList.add("local-preload--loaded");d.forEach(((e,t)=>{l.add(t)}));const c=(e="normal")=>{if(!i){i=!0,t.classList.add("local-preload--loaded");document.querySelectorAll('img[data-css-asset="true"], link[data-css-asset="true"]').forEach((e=>{e.remove()}))}},p=(e,t,a="loaded")=>{if(l.has(e)){l.delete(e),s++;d[e];s===o&&!i&&c("all assets loaded")}},u=()=>{const e={total:0,loaded:0,loading:0,failed:0,pending:0,details:[]};return d.forEach(((t,a)=>{if("SCRIPT"===t.tagName){e.total++;const r=l.has(a),d=t._preloaderLoaded||"complete"===t.readyState||"completed"===t.readyState||t.hasAttribute("data-executed"),o={index:a,src:t.src||"inline script",readyState:t.readyState,isLoaded:d,isPending:r,hasOnload:!!t.onload,hasEventListener:!!t._preloaderMonitoring};e.details.push(o),d?e.loaded++:r?e.pending++:"loading"===t.readyState?e.loading++:e.failed++}})),e};d.forEach(((e,t)=>{if("SCRIPT"===e.tagName){if(window.localPreloaderDebug&&(e=>{const t={src:e.src,readyState:e.readyState,readyStateSupported:void 0!==e.readyState,hasSrc:!!e.src,isInline:!e.src,parentNode:!!e.parentNode,_preloaderLoaded:e._preloaderLoaded,hasDataExecuted:e.hasAttribute("data-executed"),_preloaderMonitoring:e._preloaderMonitoring,_preloaderStartTime:e._preloaderStartTime,timeSinceStart:e._preloaderStartTime?Date.now()-e._preloaderStartTime:null,onloadHandler:!!e.onload,onerrorHandler:!!e.onerror,hasLoadListener:!!e._preloaderLoadListener,hasErrorListener:!!e._preloaderErrorListener};window.localPreloaderDebug})(e),(e=>{if(!e.src)return!0;if(e._preloaderLoaded)return!0;if(e.hasAttribute("data-executed"))return!0;try{return"complete"===e.readyState||"completed"===e.readyState||"loading"!==e.readyState&&(void 0===e.readyState&&e.parentNode&&e._preloaderStartTime&&Date.now()-e._preloaderStartTime>1e3?(window.localPreloaderDebug,!0):!(!e.parentNode||e.src))}catch(e){return!1}})(e))p(t,0,"already loaded");else if(e.src){e.readyState,e._preloaderMonitoring=!0,e._preloaderStartTime=Date.now();const a=e.onload,r=e.onerror;e.onload=r=>{e._preloaderLoaded||(e._preloaderLoaded=!0,e.setAttribute("data-executed","true"),p(t)),a&&a.call(e,r)},e.onerror=a=>{e._preloaderLoaded||(e._preloaderLoaded=!0,e.setAttribute("data-executed","true"),p(t,0,"failed")),r&&r.call(e,a)};const d=()=>{e._preloaderLoaded||(e._preloaderLoaded=!0,e.setAttribute("data-executed","true"),p(t))},o=()=>{e._preloaderLoaded||(e._preloaderLoaded=!0,e.setAttribute("data-executed","true"),p(t,0,"failed"))};e.addEventListener("load",d),e.addEventListener("error",o),e._preloaderLoadListener=d,e._preloaderErrorListener=o,setTimeout((()=>{if(!e._preloaderLoaded&&e._preloaderMonitoring)if("complete"===e.readyState||"completed"===e.readyState)e._preloaderLoaded=!0,e.setAttribute("data-executed","true"),p(t);else if(void 0===e.readyState){Date.now()-e._preloaderStartTime>500&&(e._preloaderLoaded=!0,e.setAttribute("data-executed","true"),p(t))}}),100);const s=setInterval((()=>{if(!e._preloaderLoaded&&e._preloaderMonitoring){if("complete"===e.readyState||"completed"===e.readyState)e._preloaderLoaded=!0,e.setAttribute("data-executed","true"),p(t),clearInterval(s);else if(void 0===e.readyState){const a=Date.now()-e._preloaderStartTime;a>3e3?(e._preloaderLoaded=!0,e.setAttribute("data-executed","true"),p(t),clearInterval(s)):window.localPreloaderDebug}}else clearInterval(s)}),200);setTimeout((()=>{clearInterval(s)}),1e4)}else p(t,0,"loaded");window.localPreloaderDebug}else if("LINK"===e.tagName){const a=e.rel||"";if("stylesheet"===a)window.localPreloaderDebug,e.sheet?p(t,0,"already loaded"):(e.addEventListener("load",(()=>p(t))),e.addEventListener("error",(()=>p(t,0,"failed"))));else if(["preload","prefetch"].includes(a))window.localPreloaderDebug,e.sheet||e.complete?p(t,(a.charAt(0).toUpperCase(),a.slice(1)),"already loaded"):(e.addEventListener("load",(()=>p(t,(a.charAt(0).toUpperCase(),a.slice(1))))),e.addEventListener("error",(()=>p(t,(a.charAt(0).toUpperCase(),a.slice(1)),"failed"))));else if(["font","icon","apple-touch-icon"].includes(a))if(window.localPreloaderDebug,e.hasAttribute("data-css-asset")&&"CSS Font"===e.getAttribute("data-css-type")){e.getAttribute("data-css-rule");e.complete||"complete"===e.readyState?p(t,0,"already loaded"):(e.addEventListener("load",(()=>p(t))),e.addEventListener("error",(()=>p(t,0,"failed"))))}else if(e.complete||"complete"===e.readyState)p(t,(a.charAt(0).toUpperCase(),a.slice(1)),"already loaded");else if("font"===a){((e,t)=>{"fonts"in document?document.fonts.ready.then((()=>{Array.from(document.fonts).filter((t=>t.family.toLowerCase().includes(e.toLowerCase()))).length>0?p(t,0,"loaded via API"):p(t,0,"API ready")})).catch((e=>{p(t,0,"API error")})):p(t,0,"no API")})(e.getAttribute("data-font-family")||e.href.split("/").pop().split(".")[0]||"unknown",t)}else e.addEventListener("load",(()=>p(t,(a.charAt(0).toUpperCase(),a.slice(1))))),e.addEventListener("error",(()=>p(t,(a.charAt(0).toUpperCase(),a.slice(1)),"failed")));else e.complete||"complete"===e.readyState?p(t,0,"already loaded"):(e.addEventListener("load",(()=>p(t))),e.addEventListener("error",(()=>p(t,0,"failed"))))}else if("IMG"===e.tagName)if(window.localPreloaderDebug,e.hasAttribute("data-css-asset")){e.getAttribute("data-css-type"),e.getAttribute("data-css-rule");window.localPreloaderDebug,e.complete?p(t,0,"already loaded"):(e.addEventListener("load",(()=>p(t))),e.addEventListener("error",(()=>p(t,0,"failed"))))}else e.complete?p(t,0,"already loaded"):(e.addEventListener("load",(()=>p(t))),e.addEventListener("error",(()=>p(t,0,"failed"))));else if("VIDEO"===e.tagName||"AUDIO"===e.tagName)e.readyState>=2?p(t,e.tagName,"already loaded"):(e.addEventListener("canplay",(()=>p(t,e.tagName))),e.addEventListener("error",(()=>p(t,e.tagName,"failed"))),e.src||p(t,e.tagName,"no src"));else if("SOURCE"===e.tagName||"TRACK"===e.tagName)e.complete||"complete"===e.readyState?p(t,e.tagName,"already loaded"):(e.addEventListener("load",(()=>p(t,e.tagName))),e.addEventListener("error",(()=>p(t,e.tagName,"failed"))));else if("PICTURE"===e.tagName){0===e.querySelectorAll("source, img").length?p(t,0,"no sources"):p(t,0,"has sources")}else"SVG"===e.tagName?e.complete||"complete"===e.readyState?p(t,0,"already loaded"):(e.addEventListener("load",(()=>p(t))),e.addEventListener("error",(()=>p(t,0,"failed"))),setTimeout((()=>{l.has(t)&&p(t,0,"timeout")}),1e3)):"CANVAS"===e.tagName?p(t,0,"ready"):"IFRAME"===e.tagName?e.complete||"complete"===e.readyState||"completed"===e.readyState?p(t,0,"already loaded"):(e.addEventListener("load",(()=>p(t))),e.addEventListener("error",(()=>p(t,0,"failed")))):e.complete||"complete"===e.readyState||"completed"===e.readyState?p(t,e.tagName,"already loaded"):(e.addEventListener("load",(()=>p(t,e.tagName))),e.addEventListener("error",(()=>p(t,e.tagName,"failed"))))})),window.debugPreloaderStatus=()=>({assetsCount:o,loadedCount:s,pendingAssets:l.size,isCompleted:i,windowLoaded:n,assets:d.map(((e,t)=>({index:t,tagName:e.tagName,src:e.src||e.href||"inline script",isPending:l.has(t),readyState:e.readyState,_preloaderLoaded:e._preloaderLoaded,hasDataExecuted:e.hasAttribute("data-executed")})))}),window.diagnosePreloaderIssues=()=>{const e={totalAssets:o,loadedAssets:s,pendingAssets:l.size,isCompleted:i,windowLoaded:n,problematicAssets:[],scriptIssues:[],otherIssues:[]};return l.forEach((t=>{const a=d[t],r={index:t,tagName:a.tagName,src:a.src||a.href||"inline script",readyState:a.readyState,_preloaderLoaded:a._preloaderLoaded,hasDataExecuted:a.hasAttribute("data-executed"),_preloaderMonitoring:a._preloaderMonitoring,_preloaderStartTime:a._preloaderStartTime,timeSinceStart:a._preloaderStartTime?Date.now()-a._preloaderStartTime:null};"SCRIPT"===a.tagName?e.scriptIssues.push(r):e.otherIssues.push(r),e.problematicAssets.push(r)})),e.scriptIssues.length>0&&e.scriptIssues.forEach((e=>{})),e.otherIssues.length>0&&e.otherIssues.forEach((e=>{})),e},window.forceLoadAsset=e=>{if(l.has(e)){const t=d[e];return t._preloaderLoaded=!0,t.setAttribute("data-executed","true"),p(e,t.tagName,"manually forced"),!0}return!1},window.forceLoadAllRemaining=()=>{const e=Array.from(l);return e.forEach((e=>{window.forceLoadAsset(e)})),e.length},setTimeout((()=>{i||(window.diagnosePreloaderIssues(),l.size,c("timeout"))}),5e3),window.addEventListener("load",(()=>{n=!0,setTimeout((()=>{i||(window.diagnosePreloaderIssues(),d.forEach(((e,t)=>{l.has(t)&&"SCRIPT"===e.tagName&&e.src&&("complete"===e.readyState||"completed"===e.readyState||e._preloaderLoaded||e.hasAttribute("data-executed")||!e.readyState&&e._preloaderMonitoring&&Date.now()-(e._preloaderStartTime||Date.now())>2e3)&&(e._preloaderLoaded=!0,e.setAttribute("data-executed","true"),p(t))})),setTimeout((()=>{i||(window.diagnosePreloaderIssues(),c("window load"))}),1e3))}),200)})),setTimeout((()=>{i||c("final safety timeout")}),1e4),window.getScriptLoadingStatus=u,window.areAllScriptsLoaded=()=>{const e=u();return e.loaded===e.total&&e.total>0},window.getScriptLoadingDetails=()=>u(),window.isScriptLoaded=e=>{const t=document.querySelectorAll("script[src]");for(let a of t)if(a.src===e||a.src.endsWith(e))return a._preloaderLoaded||"complete"===a.readyState||"completed"===a.readyState||a.hasAttribute("data-executed");return!1},window.debugScriptLoading=()=>u(),window.debugScriptReadyStates=()=>{document.querySelectorAll("script[src]").forEach(((e,t)=>{e.readyState,e._preloaderLoaded||"complete"===e.readyState||"completed"===e.readyState||e.hasAttribute("data-executed");if(e._preloaderStartTime){Date.now(),e._preloaderStartTime}}))},window.analyzeUndefinedReadyStateScripts=()=>{const e=[],t=[];return d.forEach(((a,r)=>{if("SCRIPT"===a.tagName&&a.src){const d={index:r,src:a.src,readyState:a.readyState,readyStateSupported:void 0!==a.readyState,isPending:l.has(r),_preloaderLoaded:a._preloaderLoaded,hasDataExecuted:a.hasAttribute("data-executed"),_preloaderMonitoring:a._preloaderMonitoring,_preloaderStartTime:a._preloaderStartTime,timeSinceStart:a._preloaderStartTime?Date.now()-a._preloaderStartTime:null,onloadHandler:!!a.onload,onerrorHandler:!!a.onerror,hasLoadListener:!!a._preloaderLoadListener,hasErrorListener:!!a._preloaderErrorListener};void 0===a.readyState?e.push(d):t.push(d)}})),e.length>0&&e.forEach((e=>{})),t.length>0&&t.forEach((e=>{})),{undefinedScripts:e,definedScripts:t,totalScripts:e.length+t.length}},window.forceLoadUndefinedReadyStateScripts=()=>{let e=0;return d.forEach(((t,a)=>{"SCRIPT"===t.tagName&&t.src&&void 0===t.readyState&&l.has(a)&&(t._preloaderLoaded=!0,t.setAttribute("data-executed","true"),p(a,0,"forced undefined readyState"),e++)})),e},window.getReadyStateStatistics=()=>{const e={total:0,undefined:0,complete:0,completed:0,loading:0,other:0,byBrowser:{supportsReadyState:0,noReadyState:0}};return d.forEach(((t,a)=>{if("SCRIPT"===t.tagName&&t.src)if(e.total++,void 0===t.readyState)e.undefined++,e.byBrowser.noReadyState++;else switch(e.byBrowser.supportsReadyState++,t.readyState){case"complete":e.complete++;break;case"completed":e.completed++;break;case"loading":e.loading++;break;default:e.other++}})),e},window.testScriptLoading=()=>{const e=window.areAllScriptsLoaded(),t=window.getScriptLoadingDetails(),a=document.querySelectorAll("script[src]");return a.forEach(((e,t)=>{window.isScriptLoaded(e.src)})),window.scriptLoader&&a.forEach((e=>{if(e.src){window.scriptLoader.isLoaded(e.src)}})),{allLoaded:e,details:t,scripts:Array.from(a).map((e=>({src:e.src,loaded:window.isScriptLoaded(e.src)})))}},window.waitForAllScripts=(e=1e4)=>new Promise(((t,a)=>{const r=Date.now(),d=()=>{window.areAllScriptsLoaded()?t(!0):Date.now()-r>e?a(new Error("Timeout waiting for scripts to load")):setTimeout(d,100)};d()})),window.waitForScript=(e,t=1e4)=>new Promise(((a,r)=>{const d=Date.now(),o=()=>{window.isScriptLoaded(e)?a(!0):Date.now()-d>t?r(new Error(`Timeout waiting for script: ${e}`)):setTimeout(o,100)};o()})),window.areAllAssetsLoaded=()=>s===o&&o>0,window.waitForAllAssets=(e=1e4)=>new Promise(((t,a)=>{const r=Date.now(),d=()=>{window.areAllAssetsLoaded()?t(!0):Date.now()-r>e?a(new Error("Timeout waiting for all assets to load")):setTimeout(d,100)};d()}))};e()}},function(e){var t;t=453,e(e.s=t)}]);