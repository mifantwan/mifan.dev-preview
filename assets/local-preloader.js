"use strict";(self.webpackChunkmifan_themes=self.webpackChunkmifan_themes||[]).push([[945],{453:function(){const e=()=>{if("loading"===document.readyState)return void document.addEventListener("DOMContentLoaded",e);const o=document.querySelector("#local-preloader");if(!o)return void console.warn("Preloader element #local-preloader not found");const r=document.querySelectorAll('img, video, audio, iframe, object, embed, script, link[rel="stylesheet"]'),t=Array.from(r).filter((e=>"SCRIPT"===e.tagName||("LINK"===e.tagName&&"stylesheet"===e.rel?!e.sheet:"IMG"===e.tagName?e.src&&!e.src.startsWith("data:")&&!e.complete:"IFRAME"!==e.tagName||e.src&&!e.src.startsWith("about:")&&!e.src.startsWith("data:")))),a=t.length;let l=0,d=new Set,s=!1;console.log(`Preloader: Found ${a} assets to monitor (filtered from ${r.length} total)`);const n=document.querySelectorAll("script");if(console.log("=== SCRIPT TAGS DETAILED ANALYSIS ==="),n.forEach(((e,o)=>{console.log(`Script ${o+1}:`,{tagName:e.tagName,src:e.src,srcValue:e.getAttribute("src"),type:e.type,hasSrc:!!e.src,isInline:!e.src,innerHTML:e.innerHTML?e.innerHTML.substring(0,50)+"...":"empty"})})),console.log("=== END SCRIPT ANALYSIS ==="),0===a)return o.classList.add("local-preload--loaded"),void console.log("Preloader: No assets found, marking as loaded");t.forEach(((e,o)=>{d.add(o)}));const i=(e="normal")=>{s||(s=!0,o.classList.add("local-preload--loaded"),console.log(`Preloader: Completed (${e})`))},c=(e,o,r="loaded")=>{if(d.has(e)){d.delete(e),l++;const n=t[e];console.log(`Preloader: ${o} ${e+1}/${a} ${r} (${l}/${a})`),"failed"===r&&console.warn(`Preloader: Asset failed - ${n.src||n.href||"inline script"}`),l===a&&!s&&i("all assets loaded")}};t.forEach(((e,o)=>{if("SCRIPT"===e.tagName){if(console.log(`=== PROCESSING SCRIPT ${o+1} ===`),console.log("Script details:",{src:e.src,srcAttribute:e.getAttribute("src"),type:e.type,isInline:!e.src,tagName:e.tagName}),!(r=e).src||r._preloaderLoaded)c(o,"Script","already loaded");else if(e.src){console.log(`Preloader: Waiting for script to load: ${e.src}`);const r=e.onload,t=e.onerror;e.onload=t=>{console.log(`Preloader: Script onload fired: ${e.src}`),e._preloaderLoaded=!0,c(o,"Script"),r&&r.call(e,t)},e.onerror=r=>{console.warn(`Preloader: Script onerror fired: ${e.src}`),e._preloaderLoaded=!0,c(o,"Script","failed"),t&&t.call(e,r)},e.addEventListener("load",(()=>{console.log(`Preloader: Script load event fired: ${e.src}`),e._preloaderLoaded||(e._preloaderLoaded=!0,c(o,"Script"))})),e.addEventListener("error",(()=>{console.warn(`Preloader: Script error event fired: ${e.src}`),e._preloaderLoaded||(e._preloaderLoaded=!0,c(o,"Script","failed"))}))}else console.log("Preloader: Inline script detected, marking as loaded"),c(o,"Inline Script","loaded");console.log(`=== END SCRIPT ${o+1} ===`)}else"LINK"===e.tagName&&"stylesheet"===e.rel?e.sheet?c(o,"Stylesheet","already loaded"):(e.addEventListener("load",(()=>c(o,"Stylesheet"))),e.addEventListener("error",(()=>c(o,"Stylesheet","failed")))):e.complete||"complete"===e.readyState||"loaded"===e.readyState?c(o,"Media asset","already loaded"):(e.addEventListener("load",(()=>c(o,"Media asset"))),e.addEventListener("error",(()=>c(o,"Media asset","failed"))));var r})),setTimeout((()=>{s||(console.warn("Preloader: Timeout reached, forcing completion"),d.size>0&&console.warn(`Preloader: ${d.size} assets still pending:`,Array.from(d).map((e=>{const o=t[e];return{index:e,tagName:o.tagName,src:o.src||o.href||"inline script",type:o.type||"unknown"}}))),i("timeout"))}),5e3),window.addEventListener("load",(()=>{setTimeout((()=>{s||(console.warn("Preloader: Window load completed, forcing remaining assets"),i("window load"))}),500)})),setTimeout((()=>{s||(console.warn("Preloader: Final safety timeout, forcing completion"),i("final safety timeout"))}),1e4)};e()}},function(e){var o;o=453,e(e.s=o)}]);