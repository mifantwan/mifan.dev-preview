"use strict";(self.webpackChunkmifan_themes=self.webpackChunkmifan_themes||[]).push([[945],{453:function(){const e=()=>{if("loading"===document.readyState)return void document.addEventListener("DOMContentLoaded",e);const t=document.querySelector("#local-preloader");if(!t)return void console.warn("Preloader element #local-preloader not found");const o=document.querySelectorAll('img, video, audio, iframe, object, embed, script, link[rel="stylesheet"]'),a=Array.from(o).filter((e=>"SCRIPT"===e.tagName||("LINK"===e.tagName&&"stylesheet"===e.rel?!e.sheet:"IMG"===e.tagName?e.src&&!e.src.startsWith("data:")&&!e.complete:"IFRAME"!==e.tagName||e.src&&!e.src.startsWith("about:")&&!e.src.startsWith("data:")))),r=a.length;let l=0,d=new Set,s=!1;console.log(`Preloader: Found ${r} assets to monitor (filtered from ${o.length} total)`);const n=document.querySelectorAll("script");if(console.log("Preloader: Script tags found:",Array.from(n).map((e=>({src:e.src,type:e.type,hasSrc:!!e.src,readyState:e.readyState,complete:e.complete})))),0===r)return t.classList.add("local-preload--loaded"),void console.log("Preloader: No assets found, marking as loaded");a.forEach(((e,t)=>{d.add(t)}));const c=(e="normal")=>{s||(s=!0,t.classList.add("local-preload--loaded"),console.log(`Preloader: Completed (${e})`))},i=(e,t,o="loaded")=>{if(d.has(e)){d.delete(e),l++;const n=a[e];console.log(`Preloader: ${t} ${e+1}/${r} ${o} (${l}/${r})`),"failed"===o&&console.warn(`Preloader: Asset failed - ${n.src||n.href||"inline script"}`),l===r&&!s&&c("all assets loaded")}};a.forEach(((e,t)=>{"SCRIPT"===e.tagName?(console.log(`Preloader: Processing script ${t+1}:`,{src:e.src,type:e.type,readyState:e.readyState,complete:e.complete}),e.complete||"complete"===e.readyState||"loaded"===e.readyState?i(t,"Script","already loaded"):e.src?(console.log(`Preloader: Waiting for script to load: ${e.src}`),e.addEventListener("load",(()=>{console.log(`Preloader: Script loaded successfully: ${e.src}`),i(t,"Script")})),e.addEventListener("error",(()=>{console.warn(`Preloader: Script failed to load: ${e.src}`),i(t,"Script","failed")}))):(console.log("Preloader: Inline script detected, marking as loaded"),i(t,"Inline Script","loaded"))):"LINK"===e.tagName&&"stylesheet"===e.rel?e.sheet?i(t,"Stylesheet","already loaded"):(e.addEventListener("load",(()=>i(t,"Stylesheet"))),e.addEventListener("error",(()=>i(t,"Stylesheet","failed")))):e.complete||"complete"===e.readyState||"loaded"===e.readyState?i(t,"Media asset","already loaded"):(e.addEventListener("load",(()=>i(t,"Media asset"))),e.addEventListener("error",(()=>i(t,"Media asset","failed"))))})),setTimeout((()=>{s||(console.warn("Preloader: Timeout reached, forcing completion"),d.size>0&&console.warn(`Preloader: ${d.size} assets still pending:`,Array.from(d).map((e=>{const t=a[e];return{index:e,tagName:t.tagName,src:t.src||t.href||"inline script",type:t.type||"unknown"}}))),c("timeout"))}),5e3),window.addEventListener("load",(()=>{setTimeout((()=>{s||(console.warn("Preloader: Window load completed, forcing remaining assets"),c("window load"))}),500)})),setTimeout((()=>{s||(console.warn("Preloader: Final safety timeout, forcing completion"),c("final safety timeout"))}),1e4)};e()}},function(e){var t;t=453,e(e.s=t)}]);