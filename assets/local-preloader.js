"use strict";(self.webpackChunkmifan_themes=self.webpackChunkmifan_themes||[]).push([[945],{453:function(){const e=()=>{if("loading"===document.readyState)return void document.addEventListener("DOMContentLoaded",e);const t=document.querySelector("#local-preloader");if(!t)return void console.warn("Preloader element #local-preloader not found");const a=document.querySelectorAll('img, video, audio, iframe, object, embed, script, link[rel="stylesheet"]'),o=Array.from(a).filter((e=>"SCRIPT"===e.tagName||("LINK"===e.tagName&&"stylesheet"===e.rel?!e.sheet:"IMG"===e.tagName?e.src&&!e.src.startsWith("data:")&&!e.complete:"IFRAME"!==e.tagName||e.src&&!e.src.startsWith("about:")&&!e.src.startsWith("data:")))),r=o.length;let d=0,l=new Set,s=!1;if(console.log(`Preloader: Found ${r} assets to monitor (filtered from ${a.length} total)`),0===r)return t.classList.add("local-preload--loaded"),void console.log("Preloader: No assets found, marking as loaded");o.forEach(((e,t)=>{l.add(t)}));const n=(e="normal")=>{s||(s=!0,t.classList.add("local-preload--loaded"),console.log(`Preloader: Completed (${e})`))},i=(e,t,a="loaded")=>{if(l.has(e)){l.delete(e),d++;const i=o[e];console.log(`Preloader: ${t} ${e+1}/${r} ${a} (${d}/${r})`),"failed"===a&&console.warn(`Preloader: Asset failed - ${i.src||i.href||"inline script"}`),d===r&&!s&&n("all assets loaded")}};o.forEach(((e,t)=>{"SCRIPT"===e.tagName?e.complete||"complete"===e.readyState||"loaded"===e.readyState?i(t,"Script","already loaded"):e.src?(e.addEventListener("load",(()=>i(t,"Script"))),e.addEventListener("error",(()=>i(t,"Script","failed")))):i(t,"Inline Script","loaded"):"LINK"===e.tagName&&"stylesheet"===e.rel?e.sheet?i(t,"Stylesheet","already loaded"):(e.addEventListener("load",(()=>i(t,"Stylesheet"))),e.addEventListener("error",(()=>i(t,"Stylesheet","failed")))):e.complete||"complete"===e.readyState||"loaded"===e.readyState?i(t,"Media asset","already loaded"):(e.addEventListener("load",(()=>i(t,"Media asset"))),e.addEventListener("error",(()=>i(t,"Media asset","failed"))))})),setTimeout((()=>{s||(console.warn("Preloader: Timeout reached, forcing completion"),l.size>0&&console.warn(`Preloader: ${l.size} assets still pending:`,Array.from(l).map((e=>{const t=o[e];return{index:e,tagName:t.tagName,src:t.src||t.href||"inline script",type:t.type||"unknown"}}))),n("timeout"))}),5e3),window.addEventListener("load",(()=>{setTimeout((()=>{s||(console.warn("Preloader: Window load completed, forcing remaining assets"),n("window load"))}),500)})),setTimeout((()=>{s||(console.warn("Preloader: Final safety timeout, forcing completion"),n("final safety timeout"))}),1e4)};e()}},function(e){var t;t=453,e(e.s=t)}]);